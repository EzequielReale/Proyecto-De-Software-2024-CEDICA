{% extends "layout.html" %}

{% block title %}CEDICA - Ver rider{% endblock %}

{% block head %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
{% endblock %}

{% block content %}
<h1 style="color: #007bff; margin-bottom: 20px;">Detalle del rider</h1>
<p class="lead mb-4">Información detallada del rider</p>

<div class="button-group">
    <a href="{{ url_for('team.update', id=rider.id) }}" class="btn btn-warning btn-icon">
        <i class="fas fa-edit"></i> Editar
    </a>
    <form action="{{ url_for('jya.destroy', id=rider.id) }}" method="POST" onsubmit="return confirmDeleteRider();" style="display:inline;">
        <button type="submit" class="btn btn-danger btn-icon">
            <i class="fas fa-trash-alt"></i> Eliminar
        </button>
    </form>
</div>

<div class="card">
    <div class="card-body">
        <h5 class="card-title">{{ rider.name }} {{ rider.last_name }}</h5>
        <p class="card-text">
            <strong>DNI:</strong> {{ rider.dni }}<br>
            <strong>Teléfono:</strong> {{ rider.phone }}<br>
            <strong>Teléfono de emergencia:</strong> {{ rider.emergency_phone }}<br>
            <strong>Domicilio:</strong> {{ rider.street }} {{ rider.number }}, {{ rider.locality.name }}, provincia de {{ rider.locality.province.name }}<br>
            <strong>Fecha de nacimiento:</strong> {{ rider.birth_date.strftime('%d-%m-%Y') }} ({{(current_year - rider.birth_date.year)}} años)<br>
            <strong>Lugar de nacimiento:</strong> {{ rider.city_of_birth.name }}, provincia de {{rider.city_of_birth.province.name}}<br>
            <strong>Tiene certificado de discapacidad:</strong> {% if rider.disability_id %}Sí. {{ rider.disability.name }}{% else %}No{% endif %}<br>
            <strong>Tiene pensión:</strong> {% if rider.pension_benefit %}Sí. {{ rider.pension_benefit }}{% else %}No{% endif %}<br>
            <strong>Tiene tutela:</strong> {% if rider.has_guardianship %}Sí{% else %}No{% endif %}<br>
            <strong>Recibe asignación familiar:</strong> {% if rider.family_allowance %}{{ rider.family_allowance }}{% else %}No{% endif %}<br>
            <strong>Está becado:</strong> {% if rider.grant_percentage %}Sí. Porcentaje: {{ rider.grant_percentage }}%{% else %}No{% endif %}<br>
        </p>
    </div>
</div>

<br>

<div class="button-group">
    <a href="{{ url_for('jya.index') }}" class="btn btn-primary btn-icon">
        <i class="fas fa-arrow-left"></i> Volver al listado de riders
    </a>
    <a href="{{ url_for('jya.add_document', id=rider.id) }}" class="btn btn-success btn-icon">
        <i class="fas fa-file-alt"></i> Agregar documento
    </a>
</div>

<div class="card">
    <div class="card-body">
        <h5 class="card-title">Documentos</h5>
        <div class="document-grid">
            {% if documents %}
            <ul class="document-list">
                {% for document in documents %}
                <li class="document-item">
                    <a href="{{ document.url }}" target="_blank" class="document-link">
                        <i class="fas fa-file-alt"></i> {{ document.name }}
                    </a>
                    <form action="{{ url_for('jya.destroy_document', id=rider.id, document_id=document.id) }}" method="POST" onsubmit="return confirmDeleteDocument();" class="document-delete-form">
                        <button type="submit" class="btn btn-danger btn-sm">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </form>
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <p>No hay documentos cargados</p>
            {% endif %}
        </div>
    </div>
</div>

{% block scripts %}
<script>
    function confirmDeleteRider() {
        return confirm("¿Está seguro de que desea eliminar este rider?");
    }

    function confirmDeleteDocument() {
        return confirm("¿Está seguro de que desea eliminar este documento?");
    }
</script>
{% endblock %}

{% block styles %}
<style>
    body {
        background-color: #f8f9fa;
    }

    .card {
        margin-top: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .card-title {
        font-size: 1.5rem;
        color: #0056b3;
        margin-bottom: 10px;
    }

    .card-text {
        font-size: 1.1rem;
        color: #333;
    }

    .button-group {
        display: flex;
        justify-content: flex-end;
        margin-bottom: 20px;
    }

    .btn-icon {
        margin-left: 10px;
    }

    .btn {
        border-radius: 20px;
        padding: 10px 20px;
    }

    .btn-warning {
        background-color: #ffc107;
        border-color: #ffc107;
    }

    .btn-danger {
        background-color: #dc3545;
        border-color: #dc3545;
    }

    .btn-primary {
        background-color: #007bff;
        border-color: #007bff;
    }

    /* Grid layout para los documentos */
    .document-grid {
        display: grid;
        gap: 20px;
    }

    .document-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background-color: #f8f9fa;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 10px 15px;
        transition: box-shadow 0.2s ease-in-out;
    }

    .document-item:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .document-link {
        font-size: 1.1rem;
        text-decoration: none;
        color: #007bff;
        flex-grow: 1;
        margin-right: 15px;
    }

    .document-link i {
        margin-right: 8px;
    }

    .document-delete-form {
        margin: 0;
    }

    .document-delete-form .btn {
        padding: 5px 10px;
    }

    .btn-sm {
        font-size: 0.875rem;
        padding: 5px 10px;
        border-radius: 5px;
    }
</style>
{% endblock %}

{% endblock %}

{% block footer %}
{% endblock %}
